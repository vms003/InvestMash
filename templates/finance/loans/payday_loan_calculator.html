<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enhanced Payday Loan Calculator</title>
        <!-- External CSS libraries -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
        <!-- Custom CSS -->
        <link rel="stylesheet" href="/static/css/styles.css">
        <link rel="stylesheet" href="/static/css/index.css">
        <link rel="stylesheet" href="/static/css/calculator.css">
        <script src="/static/js/script.js"></script>
        <!-- Favicons -->
        <link rel="apple-touch-icon" sizes="180x180" href="/static/favicon/logo icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="/static/favicon/logo icon.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/static/favicon/logo icon.png">
        <link rel="manifest" href="/static/favicon/site.webmanifest">
        <!-- Google Fonts -->
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        /* Styles for header, main, and form */
        /* body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f4;
        }

        header {
            background-color: #333;
            color: #fff;
            padding: 20px;
            text-align: center;
        } */

        main {
            max-width: 800px;
            margin: 20px auto;
            padding: 20px;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        h1, h2 {
            text-align: center;
        }

        form {
            margin-top: 20px;
            text-align: center;
        }

        label {
            display: block;
            margin-bottom: 6px;
        }

        input[type="number"], .calbutton {
            padding: 10px;
            margin-bottom: 10px;
            width: 100%;
            box-sizing: border-box;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 16px;
        }

        .calbutton {
            background-color: #333;
            color: #fff;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .calbutton:hover {
            background-color: #555;
        }

        .result {
            margin-top: 20px;
            font-size: 18px;
        }

        /* Additional styles for error message */
        .error {
            color: #f44336;
            font-size: 14px;
            margin-top: 10px;
        }

        /* Additional styles for chart container */
        .chart-container {
            margin-top: 20px;
            border: 1px solid #ccc;
            border-radius: 4px;
            overflow: hidden;
        }

        canvas {
            width: 100%;
            height: auto;
        }

        /* Additional styles for amortization schedule table */
        .amortization-table {
            margin-top: 20px;
            width: 100%;
            border-collapse: collapse;
        }

        .amortization-table th, .amortization-table td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }

        .amortization-table th {
            background-color: #f2f2f2;
        }

        /* Additional styles for comparison table */
        .comparison-table {
            margin-top: 20px;
            width: 100%;
            border-collapse: collapse;
        }

        .comparison-table th, .comparison-table td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: center;
        }

        .comparison-table th {
            background-color: #f2f2f2;
        }
    </style>
</head>
<body>
        <!-- Navbar placeholder -->
        <nav class="u-full-width no-print">
            <!-- Mobile Navigation Holder -->
            <div class="mobile-nav">
                <!-- Logo -->
                <div class="logo-holder">
                    <a href="{{ url_for('index') }}" class="logo-holder">
                        <img alt="InvestMash" class="logo" src="/static/favicon/InvestMash.png"/>
                    </a>            
                </div>
                <!-- Menu Icon -->
                <div class="menu-icon" onclick="toggleMobileMenu()">
                    <i class="fas fa-bars"></i>
                </div>
                <!-- Mobile Navigation Content -->
                <div id="mobile-menu" class="mobile-menu">
                    <!-- Navigation Links -->
                    <div class="mobile-links">
                        <a href="{{ url_for('index') }}">Home</a>
                        <a href="{{ url_for('explore_screener') }}">Screens</a>
                        <a href="/finance/personal_finance.html">Personal Finance</a>
                        <a href="/contact.html">Contact</a>
                        <a href="/login/indexd41d.html?">Login</a>
                        <a href="/register/indexd41d.html?">Sign Up</a>
                    </div>
        
                </div>
            </div>
            <!-- Top Navigation Holder (for desktop) -->
            <div class="top-nav-holder">
                <div class="container">
                    <div class="layer-holder top-navigation">
                        <div class="layer flex flex-space-between" style="align-items: center; height: 50px">
                            <!-- Logo -->
                            <a href="{{ url_for('index') }}" class="logo-holder">
                                    <img alt="InvestMash" class="logo" src="/static/favicon/InvestMash.png"/>
                            </a>                    
        
                            <!-- Menu Items -->
                            <div class="desktop-links">
                                <a href="{{ url_for('index') }}">Home</a>
                                <a href="{{ url_for('explore_screener') }}">Screens</a>
                                <div class="dropdown-menu">
                                    <button class="button-plain" type="button" onclick="toggleDropdown(event)">
                                        Personal Finance
                                        <i class="icon-down"></i>
                                    </button>
                                    <ul class="dropdown-content flex-column tools-menu" style="width: 350px" id="nav-tools-menu">
                                        <li>
                                            <a href="/finance/investment.html" class="flex flex-align-center flex-gap-16">
                                                <div class="bg-stripes square-56">
                                                    <img src="/static/favicon/investment.svg" alt="Investment Calculator">
                                                </div>
                                                <div>
                                                    <div class="font-weight-500 font-size-14" style="font-weight: 850;font-size: 15px;">Investment Calculator</div>
                                                    <div class="sub font-size-13" style="font-size: 12px;">Calculate interest, returns, savings, etc.</div>
                                                </div>
                                            </a>
                                        </li>
                                        
                                        <!-- Budgeting and Saving -->
                                        <li>
                                            <a href="/finance/budgeting_saving.html" class="flex flex-align-center flex-gap-16">
                                                <div class="bg-stripes square-56">
                                                    <img src="/static/favicon/saving and budgeting.svg" alt="Budgeting and Saving Calculator">
                                                </div>
                                                <div>
                                                    <div class="font-weight-500 font-size-14" style="font-weight: 850;font-size: 15px;">Budgeting and Saving Calculator</div>
                                                    <div class="sub font-size-13"style="font-size: 12px;">Manage your budget and savings goals</div>
                                                </div>
                                            </a>
                                        </li>
                                        <!-- Loans -->
                                        <li>
                                            <a href="/finance/loans.html" class="flex flex-align-center flex-gap-16">
                                                <div class="bg-stripes square-56">
                                                    <img src="/static/favicon/loan.svg" alt="Loans Calculator">
                                                </div>
                                                <div>
                                                    <div class="font-weight-500 font-size-14"style="font-weight: 850;font-size: 15px;">Loans Calculator</div>
                                                    <div class="sub font-size-13"style="font-size: 12px;">Calculate different types of loans</div>
                                                </div>
                                            </a>
                                        </li>
                                        <!-- Insurance -->
                                        <li>
                                            <a href="/finance/insurance.html" class="flex flex-align-center flex-gap-16">
                                                <div class="bg-stripes square-56">
                                                    <img src="/static/favicon/insurance.svg" alt="Insurance Calculator">
                                                </div>
                                                <div>
                                                    <div class="font-weight-500 font-size-14"style="font-weight: 850;font-size: 15px;">Insurance Calculator</div>
                                                    <div class="sub font-size-13"style="font-size: 12px;">Estimate insurance coverage and premiums</div>
                                                </div>
                                            </a>
                                        </li>
                                        <!-- Mortgages and Real Estate -->
                                        <li>
                                            <a href="/finance/mortgage_real_estate_calculator.html" class="flex flex-align-center flex-gap-16">
                                                <div class="bg-stripes square-56">
                                                    <img src="/static/favicon/mortgage.svg" alt="Mortgage and Real Estate Calculator">
                                                </div>
                                                <div>
                                                    <div class="font-weight-500 font-size-14" style="font-weight: 850;font-size: 15px;">Mortgage and Real Estate Calculator</div>
                                                    <div class="sub font-size-13" style="font-size: 12px;">Calculate mortgage payments, rates, house affordability, etc.</div>
                                                </div>
                                            </a>
                                        </li>
                                        
                                    
                                        <!-- Student Loans -->
                                        <li>
                                            <a href="/finance/student_loans.html" class="flex flex-align-center flex-gap-16">
                                                <div class="bg-stripes square-56">
                                                    <img src="/static/favicon/student.svg" alt="Student Loans Calculator">
                                                </div>
                                                <div>
                                                    <div class="font-weight-500 font-size-14"style="font-weight: 850;font-size: 15px;">Student Loans Calculator</div>
                                                    <div class="sub font-size-13"style="font-size: 12px;">Estimate student loan payments and options</div>
                                                </div>
                                            </a>
                                        </li>
                                        <!-- Taxes -->
                                        <li>
                                            <a href="/finance/taxes.html" class="flex flex-align-center flex-gap-16">
                                                <div class="bg-stripes square-56">
                                                    <img src="/static/favicon/tax.svg" alt="Taxes Calculator">
                                                </div>
                                                <div>
                                                    <div class="font-weight-500 font-size-14"style="font-weight: 850;font-size: 15px;">Taxes Calculator</div>
                                                    <div class="sub font-size-13"style="font-size: 12px;">Calculate tax liabilities and deductions</div>
                                                </div>
                                            </a>
                                        </li>
                                        <!-- Retirement -->
                                        <li>
                                            <a href="/finance/retirement.html" class="flex flex-align-center flex-gap-16">
                                                <div class="bg-stripes square-56">
                                                    <img src="/static/favicon/pension.svg" alt="Retirement Calculator">
                                                </div>
                                                <div>
                                                    <div class="font-weight-500 font-size-14"style="font-weight: 850;font-size: 15px;">Retirement Calculator</div>
                                                    <div class="sub font-size-13"style="font-size: 12px;">Plan for retirement savings, investments, etc.</div>
                                                </div>
                                            </a>
                                        </li>
                                    
                                    </ul>
                                </div>
                                <a href="/contact.html">Contact</a>
                                <a href="/login.html">Login</a>
                                <a href="/register.html">Sign Up</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </nav>
    <header>
        <h1>Enhanced Payday Loan Calculator</h1>
    </header>
    <main>
        <section>
            <h2>Calculate fees and interest for payday loans</h2>
            <!-- Error message -->
            <p id="error" class="error"></p>
            <!-- Form -->
            <form id="loanForm">
                <label for="loanAmount">Loan Amount (Rupees)</label>
                <input type="number" id="loanAmount" placeholder="Enter loan amount" min="0" required>
                <label for="repaymentPeriod">Repayment Period (Days)</label>
                <input type="number" id="repaymentPeriod" placeholder="Enter repayment period in days" min="1" required>
                <label for="interestRate">Interest Rate (%)</label>
                <input type="number" id="interestRate" placeholder="Enter interest rate" min="0" step="0.01" required>
                <button class="calbutton" type="button" onclick="calculateLoan()">Calculate</button>
            </form>
            <!-- Result -->
            <div id="loanResult" class="result"></div>
            <!-- Chart container -->
            <section class="chart-container">
                <canvas id="loanChart"></canvas>
            </section>
            <!-- Amortization schedule table -->
            <h3>Amortization Schedule</h3>
            <table id="amortizationTable" class="amortization-table"></table>
            <!-- Loan comparison table -->
            <h3>Loan Comparison</h3>
            <table id="comparisonTable" class="comparison-table"></table>
        </section>
        <!-- Information section -->
        <section class="info-section">
            <h3>About Enhanced Payday Loan Calculator</h3>
            <p>
                The Enhanced Payday Loan Calculator allows you to calculate fees and interest for payday loans with advanced features
                such as dynamic fee and interest rates, loan comparison, amortization schedule, interactive graphs, and loan refinancing options.
            </p>
        </section>
    </main>
    <script>
        function calculateLoan() {
            // Clear previous results and error message
            document.getElementById('loanResult').innerHTML = '';
            document.getElementById('error').innerHTML = '';

            // Get user inputs
            const loanAmount = parseFloat(document.getElementById('loanAmount').value);
            const repaymentPeriod = parseInt(document.getElementById('repaymentPeriod').value);
            const interestRate = parseFloat(document.getElementById('interestRate').value);

            // Validate inputs
            if (isNaN(loanAmount) || isNaN(repaymentPeriod) || isNaN(interestRate)) {
                document.getElementById('error').innerHTML = 'Please enter valid numbers for all fields.';
                return;
            }

            // Calculate loan details
            const totalInterest = (loanAmount * interestRate * repaymentPeriod) / 36500;
            const totalAmount = loanAmount + totalInterest;
            const monthlyPayment = totalAmount / repaymentPeriod;

            // Display loan details
            document.getElementById('loanResult').innerHTML = `
                <p>Total Interest: ₹${totalInterest.toFixed(2)}</p>
                <p>Total Amount Due: ₹${totalAmount.toFixed(2)}</p>
                <p>Monthly Payment: ₹${monthlyPayment.toFixed(2)}</p>
            `;

            // Calculate and display amortization schedule
            displayAmortizationSchedule(loanAmount, totalInterest, repaymentPeriod);

            // Calculate and display loan comparison
            displayLoanComparison();
        }

        function displayAmortizationSchedule(loanAmount, totalInterest, repaymentPeriod) {
            const table = document.getElementById('amortizationTable');
            table.innerHTML = `
                <tr>
                    <th>Payment #</th>
                    <th>Payment Amount</th>
                    <th>Principal</th>
                    <th>Interest</th>
                    <th>Remaining Balance</th>
                </tr>
            `;
            let remainingBalance = loanAmount;
            const monthlyPayment = (loanAmount + totalInterest) / repaymentPeriod;
            for (let i = 1; i <= repaymentPeriod; i++) {
                const interestPayment = remainingBalance * (totalInterest / repaymentPeriod);
                const principalPayment = monthlyPayment - interestPayment;
                remainingBalance -= principalPayment;
                table.innerHTML += `
                    <tr>
                        <td>${i}</td>
                        <td>₹${monthlyPayment.toFixed(2)}</td>
                        <td>₹${principalPayment.toFixed(2)}</td>
                        <td>₹${interestPayment.toFixed(2)}</td>
                        <td>₹${remainingBalance.toFixed(2)}</td>
                    </tr>
                `;
            }
        }

        function displayLoanComparison() {
            // Implement loan comparison logic here
        }
    </script>
</body>
</html>
