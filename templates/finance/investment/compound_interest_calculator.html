<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Compound Interest Calculator</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* Styles for header, main, and form */
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f4;
        }

        header {
            background-color: #333;
            color: #fff;
            padding: 20px;
            text-align: center;
        }

        main {
            max-width: 800px;
            margin: 20px auto;
            padding: 20px;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        h1, h2 {
            text-align: center;
        }

        form {
            margin-top: 20px;
            text-align: center;
        }

        label {
            display: block;
            margin-bottom: 6px;
        }

        input[type="number"], button {
            padding: 10px;
            margin-bottom: 10px;
            width: 100%;
            box-sizing: border-box;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 16px;
        }

        button {
            background-color: #333;
            color: #fff;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        button:hover {
            background-color: #555;
        }

        .result {
            margin-top: 20px;
            font-size: 18px;
        }

        /* New styles for reset button */
        .reset-btn {
            background-color: #f44336;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s ease;
            margin-top: 20px;
        }

        .reset-btn:hover {
            background-color: #d32f2f;
        }

        /* New styles for error message */
        .error {
            color: #f44336;
            font-size: 14px;
            margin-top: 10px;
        }

        /* New styles for chart container */
        .chart-container {
            margin-top: 20px;
            border: 1px solid #ccc;
            border-radius: 4px;
            overflow: hidden;
        }

        canvas {
            width: 100%;
            height: auto;
        }
    </style>
</head>
<body>
    <header>
        <h1>Compound Interest Calculator</h1>
    </header>
    <main>
        <section>
            <h2>Compute interest earned on an investment, taking into account compounding.</h2>
            <!-- Error message -->
            <p id="error" class="error"></p>
            <!-- Form -->
            <form id="compoundInterestForm">
                <label for="principal">Principal Amount (Rupees)</label>
                <input type="number" id="principal" placeholder="Enter principal amount in rupees" min="0" required>
                <label for="rate">Annual Interest Rate (%)</label>
                <input type="number" id="rate" placeholder="Enter annual interest rate" min="0" step="0.01" required>
                <label for="time">Time Duration (Years)</label>
                <input type="number" id="time" placeholder="Enter time duration in years" min="0" step="0.01" required>
                <label for="compoundFreq">Compound Frequency (per year) [Optional]</label>
                <input type="number" id="compoundFreq" placeholder="Enter compound frequency">
                <button type="button" onclick="calculateCompoundInterest()">Calculate</button>
            </form>
            <!-- Result -->
            <div id="compoundInterestResult" class="result"></div>
            <!-- Reset button -->
            <button class="reset-btn" onclick="resetCompoundInterestForm()">Reset</button>
        </section>
        <!-- Chart container -->
        <section class="chart-container">
            <canvas id="compoundInterestChart"></canvas>
        </section>
        <!-- Information section -->
        <section class="info-section">
            <h3>About Compound Interest Calculator</h3>
            <p>
                The Compound Interest Calculator helps you compute interest earned on an investment over time,
                taking into account the compounding frequency. Enter the principal amount, annual interest rate,
                time duration, and compound frequency (optional), then click "Calculate" to get the results. The chart
                below visualizes the growth of your investment.
            </p>
        </section>
    </main>
    <script>
        const ctx = document.getElementById('compoundInterestChart').getContext('2d');
        let compoundInterestChart;

        function calculateCompoundInterest() {
            const principal = parseFloat(document.getElementById('principal').value);
            const rate = parseFloat(document.getElementById('rate').value);
            const time = parseFloat(document.getElementById('time').value);
            const compoundFreq = parseFloat(document.getElementById('compoundFreq').value) || 1;

            // Check if any of the inputs are NaN
            if (isNaN(principal) || isNaN(rate) || isNaN(time)) {
                document.getElementById('error').innerHTML = 'Please enter valid numbers for all fields.';
                return;
            }

            // Clear previous result
            document.getElementById('compoundInterestResult').innerHTML = '';

            // Calculate compound interest
            const { interest, amounts } = calculateCompoundInterestValues(principal, rate, time, compoundFreq);

            // Display results
            document.getElementById('compoundInterestResult').innerHTML = `
                <p>Total Interest Earned: â‚¹${interest.toFixed(2)}</p>
            `;

            // Update chart
            if (compoundInterestChart) {
                compoundInterestChart.destroy();
            }
            compoundInterestChart = generateChart(amounts);
        }

        function calculateCompoundInterestValues(principal, rate, time, compoundFreq) {
            const amounts = [];
            let totalInterest = 0;

            for (let i = 1; i <= time * compoundFreq; i++) {
                const amount = principal * Math.pow(1 + rate / (100 * compoundFreq), i);
                const interest = amount - principal;
                amounts.push(amount);
                totalInterest += interest;
            }

            return { interest: totalInterest, amounts };
        }

        function resetCompoundInterestForm() {
            document.getElementById('compoundInterestForm').reset();
            document.getElementById('error').innerHTML = '';
            document.getElementById('compoundInterestResult').innerHTML = '';

            // Destroy the chart if it exists
            if (compoundInterestChart) {
                compoundInterestChart.destroy();
            }
        }

        function generateChart(data) {
            const labels = Array.from({ length: data.length }, (_, i) => `Year ${i + 1}`);

            const chartData = {
                labels: labels,
                datasets: [{
                    label: 'Investment Growth',
                    data: data,
                    backgroundColor: 'rgba(75, 192, 192, 0.2)',
                    borderColor: 'rgba(75, 192, 192, 1)',
                    borderWidth: 1
                }]
            };

            const chartOptions = {
                scales: {
                    yAxes: [{
                        ticks: {
                            beginAtZero: true
                        }
                    }]
                }
            };

            return new Chart(ctx, {
                type: 'line',
                data: chartData,
                options: chartOptions
            });
        }
    </script>
</body>
</html>
